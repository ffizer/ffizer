<!DOCTYPE HTML>
<html lang="en" class="frappe" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Tutorial - ffizer</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="./theme/catppuccin.css">
        <link rel="stylesheet" href="./theme/catppuccin-highlight.css">
        <link rel="stylesheet" href="./theme/mdbook-admonish.css">
        <link rel="stylesheet" href="./theme/catppuccin-admonish.css">
        <link rel="stylesheet" href="./mdbook-admonish.css">

        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "frappe" : "frappe";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
    </script>

    <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('frappe')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

    <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

      <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="overview.html"><strong aria-hidden="true">1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="template_authoring.html"><strong aria-hidden="true">2.</strong> Template Authoring</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="authoring_tutorial.html" class="active"><strong aria-hidden="true">2.1.</strong> Tutorial</a></li><li class="chapter-item expanded "><a href="how_to.html"><strong aria-hidden="true">2.2.</strong> How to...</a></li><li class="chapter-item expanded "><a href="template_configuration.html"><strong aria-hidden="true">2.3.</strong> Configuration</a></li><li class="chapter-item expanded "><a href="schema_of_ffizer_yaml.html"><strong aria-hidden="true">2.4.</strong> Schema of .ffizer.yaml</a></li><li class="chapter-item expanded "><a href="builtin_variables.html"><strong aria-hidden="true">2.5.</strong> Built-in Variables</a></li><li class="chapter-item expanded "><a href="builtin_functions.html"><strong aria-hidden="true">2.6.</strong> Built-in Functions</a></li><li class="chapter-item expanded "><a href="editors_setup.html"><strong aria-hidden="true">2.7.</strong> IDE/Editor setup' suggestions</a></li></ol></li><li class="chapter-item expanded "><a href="changelog.html"><strong aria-hidden="true">3.</strong> Changelog</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

    <!-- Track and set sidebar scroll position -->
    <script>
        var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
        sidebarScrollbox.addEventListener('click', function(e) {
            if (e.target.tagName === 'A') {
                sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
            }
        }, { passive: true });
        var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
        sessionStorage.removeItem('sidebar-scroll');
        if (sidebarScrollTop) {
            // preserve sidebar scroll position when navigating via links within sidebar
            sidebarScrollbox.scrollTop = sidebarScrollTop;
        } else {
            // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
            var activeSection = document.querySelector('#sidebar .active');
            if (activeSection) {
                activeSection.scrollIntoView({ block: 'center' });
            }
        }
    </script>

    <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="latte">Latte</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="frappe">Frapp√©</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="macchiato">Macchiato</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mocha">Mocha</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                </div>

                <h1 class="menu-title">ffizer</h1>

                <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/ffizer/ffizer" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                </div>
            </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="tutorial-how-to-create-a-template-for-ffizer"><a class="header" href="#tutorial-how-to-create-a-template-for-ffizer">Tutorial: How to create a template for ffizer <!-- omit in toc --></a></h1>
<ul>
<li><a href="#begin-with-a-existing-sample">Begin with a existing sample</a></li>
<li><a href="#clean-the-content-of-my-templates-folder">Clean the content of <code>my-templates</code> folder</a></li>
<li><a href="#test-the-template">Test the template</a></li>
<li><a href="#enable-git-versionning">Enable git versionning</a></li>
<li><a href="#publish-on-remote-git-repository">Publish on remote git repository</a></li>
<li><a href="#parametrize-the-template-with-variables">Parametrize the template with variables</a></li>
<li><a href="#compose-with-an-external-template">Compose with an external template</a></li>
<li><a href="#next">Next</a></li>
</ul>
<h2 id="begin-with-a-existing-sample"><a class="header" href="#begin-with-a-existing-sample">Begin with a existing sample</a></h2>
<p>Create the folder for the template by copying the existing folder (project) that you would like to generate with the future template.</p>
<pre><code class="language-sh">cp -R my-existing-project my-template
cd my-template
</code></pre>
<p>If you don‚Äôt have an existing sample you can start with the following code, just to have something üòâ.</p>
<pre><code class="language-sh">mkdir my-template
cd my-template

cat &gt;README.md &lt;&lt;EOF
Hello World
EOF
</code></pre>
<h2 id="clean-the-content-of-my-templates-folder"><a class="header" href="#clean-the-content-of-my-templates-folder">Clean the content of <code>my-templates</code> folder</a></h2>
<ul>
<li>remove files and folder that you don‚Äôt want to be part of the template</li>
<li>maybe add  missing files and folder</li>
</ul>
<h2 id="test-the-template"><a class="header" href="#test-the-template">Test the template</a></h2>
<p>At this point you have a valid template but it‚Äôs also a sample of what the template can produce. Use it to create a sample that can show a possible output, and a test to validate what ffizer + <code>my-template</code> can generate.</p>
<pre><code class="language-sh"># create the folder for samples (the name of folder should be `.ffizer.samples.d`)
mkdir .ffizer.samples.d

# copy the current of my-template as a sample named `my-sample`
# except .ffizer.samples.d (its why we use `rsync` instead of `cp -R`)
rsync -rv --exclude=.ffizer.samples.d . .ffizer.samples.d/my-sample.expected

# test that ffizer is able to generate every samples under `.ffizer.samples.d`
# from `my-templates`
ffizer test-samples --source .
</code></pre>
<h2 id="enable-git-versionning"><a class="header" href="#enable-git-versionning">Enable git versionning</a></h2>
<pre><code class="language-sh">git init
</code></pre>
<p>A new folder <code>.git</code> was created and it should not be part of the template. To ignore this folder, you need to add a configuration for ffizer with this information.</p>
<pre><code class="language-sh">cat &gt;.ffizer.yaml &lt;&lt;EOF
ignores:
  - .git # exclude .git of the template host

EOF
</code></pre>
<p><em>An other alternatives would be to move the template, but not the sample under a <code>template</code> folder and to configure <code>use_template_dir: true</code></em></p>
<p>Now you can test again, and commit.</p>
<pre><code class="language-sh">ffizer test-samples --source .
git add .
git commit -m &quot;:tada: initialize the template&quot;
</code></pre>
<h2 id="publish-on-remote-git-repository"><a class="header" href="#publish-on-remote-git-repository">Publish on remote git repository</a></h2>
<p>ffizer support templates hosted on local file system or on remote git repositories (accessible via ssh or https). To share your template you can create and push your local repository to your favorite host (github, gitlab, bitbucket,‚Ä¶) following the same workflow than for any git repository (instructions are provided by the hosting service).</p>
<pre><code class="language-sh"># adapt the following parameters for your case
git remote add origin git@github.com:xxxx/my_template.git
git push -u origin main

# you can also test a remote template
ffizer test-samples --source git@github.com:xxxx/my_template.git
</code></pre>
<h2 id="parametrize-the-template-with-variables"><a class="header" href="#parametrize-the-template-with-variables">Parametrize the template with variables</a></h2>
<p>The interest of a template is to be more than a <code>cp -R</code>, or a <code>git clone</code>. The first expected feature is to be able to render some parametrized content. ffizer renders only files with <code>.ffizer.hbs</code> as part of the filename (it could be at end or before final extension), the part <code>.ffizer.hbs</code> will be removed from the final name after rendering. <a href="https://handlebarsjs.com/guide/">Handlebars</a> syntax is used for template string.</p>
<pre><code class="language-sh"># adapt to your case
mv README.md README.ffizer.hbs.md
cat &gt;README.ffizer.hbs.md &lt;&lt;EOF
Hello {{env_var &quot;USERNAME&quot;}}
EOF
</code></pre>
<p>At render time, the content between <code>{{</code> and  <code>}}</code> is evaluated, the sample bellow it call the function <code>env_var</code> with the parameter <code>&quot;USERNAME&quot;</code>, this function is <a href="./builtin_functions.html">built-in</a> into ffizer.</p>
<p>If you run the test, an error should be raised, because the rendered content doesn‚Äôt match the sample.</p>
<pre><code class="language-sh">&gt; ffizer test-samples --source .

Configure variables



Plan to execute

   - make dir        my-sample
   - add file         ‚îî‚îÄREADME.md
Nov 08 17:54:38.837 WARN check failed Differences: [
    EntryDiff {
        expect_base_path: &quot;/home/david/tmp/my-template/.ffizer.samples.d/my-sample.expected&quot;,
        actual_base_path: &quot;/tmp/.tmpROuSyU/my-sample&quot;,
        relative_path: &quot;README.md&quot;,
        difference: StringContent {
            expect: &quot;Hello World\n&quot;,
            actual: &quot;Hello david\n&quot;,
        },
    },
], sample: my-sample, sub-cmd: test-samples
Nov 08 17:54:38.837 ERRO cmd: CliOpts {
    verbose: 0,
    cmd: TestSamples(
        TestSamplesOpts {
            src: SourceLoc {
                uri: SourceUri {
                    raw: &quot;.&quot;,
                    path: &quot;.&quot;,
                    host: None,
                },
                rev: &quot;master&quot;,
                subfolder: None,
            },
            offline: false,
        },
    ),
}
Nov 08 17:54:38.837 ERRO failed: TestSamplesFailed
</code></pre>
<p>To fix this issue the better is to define a variable with a value that could be provided by the template user and with the default value define like previously.</p>
<pre><code class="language-sh">cat &gt;.ffizer.yaml &lt;&lt;EOF
variables:
  - name: author_name
    default_value: '{{ env_var &quot;USERNAME&quot; }}'

ignores:
  - .git # exclude .git of the template host

EOF

cat &gt;README.ffizer.hbs.md &lt;&lt;EOF
Hello {{ author_name }}
EOF
</code></pre>
<p>At this point if we rerun the test, we will have the same result, because test run <code>ffizer apply</code> with the option <code>--no-interaction</code> that imply using the default value of a variable. So we need to modify the test to force the value of the variable like a user will do by providing a response to the interactive ask of the value for <code>author_name</code> or by using the option <code>--variables</code>.</p>
<pre><code class="language-sh"># setup a configuration for the test sample `my-sample`
cat &gt;.ffizer.samples.d/my-sample.cfg.yaml &lt;&lt;EOF
apply_args:
  - --variables
  - author_name=World

EOF

ffizer test-samples --source .
</code></pre>
<p>Test is back to OK, with your parametrized template.</p>
<p>File with <code>.ffizer.hbs</code> are not the only place where you can use handlebars rendering. It can also be used in file or foldername (see <a href="./how_to.html">How to‚Ä¶</a>) and into some part of the configuration file <code>.ffizer.yaml</code> (see <a href="./template_configuration.html">Configuration</a>).</p>
<h2 id="compose-with-an-external-template"><a class="header" href="#compose-with-an-external-template">Compose with an external template</a></h2>
<p>To Avoid to duplicate content and configuration between template, you can import the content of one or several other templates into your template. In this tutorial, you will add a template that generate <code>.gitignore</code> files from <code>.gitignore.io</code> (now branded as part of topcal).</p>
<p>To that you should add a section <code>imports</code>:</p>
<pre><code class="language-sh">cat &gt;.ffizer.yaml &lt;&lt;EOF
variables:
  - name: author_name
    default_value: '{{ env_var &quot;USERNAME&quot; }}'

ignores:
  - .git # exclude .git of the template host

imports:
  - uri: &quot;https://github.com/ffizer/templates_default.git&quot;
    rev: &quot;master&quot;
    subfolder: &quot;gitignore_io&quot;

EOF
</code></pre>
<ul>
<li>The <code>gitignore_io</code> template is not hosted at a root level the git repository so you should specify the subfolder (like from the options of <code>ffizer apply</code>).</li>
<li>The uri can in the format <code>git@github....</code> or <code>https://github.com/...</code></li>
</ul>
<p>If you run <code>ffizer test-samples --source .</code>, you will have an error because the file <code>.gitignore</code> does not exist in the expected of <code>my-sample</code>. If you would like to see the generated file, the simplest way is to apply the template on a local folder (because test-samples remove files and folders created during the test). It is also the opportunity to try your template like a final user.</p>
<pre><code class="language-sh">ffizer apply -s . -d ../my-template-t1
</code></pre>
<p>You can notice the following points:</p>
<ul>
<li>the imported template ask for variable‚Äôs value</li>
<li>the ask is after your template‚Äôs variables</li>
<li>the ask is not the variable name but a sentence</li>
</ul>
<p>because the <code>.ffizer.yaml</code> of the gitignore_io template includes</p>
<pre><code class="language-yaml">variables:
  - name: gitignore_what
    default_value: git,visualstudiocode
    ask: Create useful .gitignore (via gitignore.io) for
</code></pre>
<p>In this tutorial, you will override the default value of <code>gitignore_what</code> to be only <code>git</code></p>
<pre><code class="language-sh">cat &gt;.ffizer.yaml &lt;&lt;EOF
variables:
  - name: author_name
    default_value: '{{ env_var &quot;USERNAME&quot; }}'
  - name: gitignore_what
    default_value: git
    ask: Create useful .gitignore (via gitignore.io) for

ignores:
  - .git # exclude .git of the template host

imports:
  - uri: &quot;https://github.com/ffizer/templates_default.git&quot;
    rev: &quot;master&quot;
    subfolder: &quot;gitignore_io&quot;

EOF
</code></pre>
<p>And you will also update the <code>my-sample.expected</code>.</p>
<pre><code class="language-sh">ffizer apply -s . -d ../my-template-t2
cp ../my-template-t2/.gitignore .ffizer.samples.d/my-sample.expected
ffizer test-samples --source .
</code></pre>
<p>You can now remove the result of your previous manual run.</p>
<pre><code class="language-sh">rm -Rf ../my-template-t*
</code></pre>
<h2 id="next"><a class="header" href="#next">Next</a></h2>
<p>It‚Äôs the end of this tutorial but I hope not the end of your journey with ffizer. Now you know the basics to create, to test, to parametrize and to publish a template. You can take a look to existing templates and you can continue to read the ffizer‚Äôs book, you could learn how to customize ask of value for variable, how to display selection, how to display a message, how to run command, how to read value of variable from existing file in the project,‚Ä¶</p>
<p>I forgot you can also continue to work with your current template:</p>
<ul>
<li>publish / share the new revision of your template</li>
<li>add parameters</li>
<li>extract template from your template or other stuff</li>
<li>compose with other existing templates</li>
<li>improve the user experience on update</li>
<li>‚Ä¶</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="template_authoring.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="how_to.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="template_authoring.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="how_to.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

    </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="mermaid.min.js"></script>
        <script type="text/javascript" src="mermaid-init.js"></script>


    </body>
</html>